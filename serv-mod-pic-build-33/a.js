var maternity = `{ 
  "pageTitle": "Maternity",
  "description": "This is a page Description",
  "sections": [
    {
      "id": 1,
      "artwork": "./img/SVG/maternity1.svg",
      "imageAltText": "A businesswoman wearing a yellow dress named Jane, talking to another businesswoman wearing a blue suit. There is a speech bubble over the second woman's head that says 'GOV.UK'",
      "textSections": [
        {
          "type": 0,
          "title": "",
          "text": "Jane, is an expectant mother who recently started a new role. Unfortunately, she is not entitled to Statutory Maternity Pay through her employer."
        },
        {
          "type": 1,
          "title": "Accurate Signposting",
          "text": "One day after work, one of her colleagues who previously received support points her towards GOV.UK to find out what they might be entitled to."
        }
      ]
    },
    {
      "id": 2,
      "artwork": "./img/SVG/maternity2.svg",
      "imageAltText": "Jane using a tablet, GOV.UK's webpage appears above the screen",
      "textSections": [
        {
          "type": 0,
          "title": "",
          "text": "Jane uses her tablet to access GOV.UK, and finds out what benefit’s she’s eligible for, and finds that she can apply online immediately."
        },
        {
          "type": 1,
          "title": "Self-Service",
          "text": "Jane submits her claim online during a work break, and sets her preferred channel for notifications about her claim."
        }
      ]
    },
	    {
      "id": 3,
      "artwork": "./img/SVG/maternity3.svg",
      "imageAltText": "Illustration of a group of hexagons with claim information connected together which represent Jane's claim to benefit being processed.",
      "textSections": [
        {
          "type": 0,
          "title": "",
          "text": "The DWP begin to process the claim immediately:"
        },
        {
          "type": 1,
          "title": "Identifying Citizens Effectively",
          "text": "We're able to effectively identify the citizen using our robust identity verification technology."
        },
        {
          "type": 1,
          "title": "Accelerated Decision Making",
          "text": "Because we can confirm information using our trusted data suppliers, we can deliver faster, effective decisions."
        },
        {
          "type": 1,
          "title": "Smarter Payments",
          "text": "We can ensure more claimants are paid accurately, on time on the pay day that best suits their needs."
        }
      ]
    },{
      "id": 4,
      "artwork": "./img/SVG/maternity4.svg",
      "imageAltText": "A close-up of Jane's tablet. It shows when her next payment will be, and a large button says 'Report a Change'.",
      "textSections": [
        {
          "type": 0,
          "title": "",
          "text": "The DWP confirm the claim, and commence making regular payments via her preferred channel. Now that her claim is in payment, she can access her GOV.UK account."
        },
        {
          "type": 1,
          "title": "Self-Service",
          "text": "We\’re able to effectively identify the citizen using our robust identity verification technology."
        },
        {
          "type": 1,
          "title": "Accelerated Decision Making",
          "text": "Payments are faster, safer, and more transparent for citizens. With payment industry reform on the horizon the DWP can build towards a more flexible payment system that has a universal approach to paying all claimants."
        },
        {
          "type": 0,
          "title": "",
          "text": "Jane now has the capability, access, and knowledge to self-manage her circumstances online."
        }
      ]
    },{
      "id": 5,
      "artwork": "./img/SVG/maternity5.svg",
      "imageAltText": "Jane uses her mobile phone while holding her newborn child in her arms.",
      "textSections": [
        {
          "type": 0,
          "title": "",
          "text": "After some time, Jane decides to use her Keeping In Touch Days to prepare for a return to the workplace. Unfortunately, Jane lost track of the days and kept on working without telling the DWP."
        },
        {
          "type": 1,
          "title": "Joined Up and Trusted Data",
          "text": "When people forget to tell the DWP about a change, we can rely on information from our suppliers such as HMRC to fill in the gaps. We'll know when people are working whilst claiming Maternity Allowance. We can use this information to suppress any further payment, which protects citizens from being overpaid benefit."
        }
      ]
    },{
      "id": 6,
      "artwork": "./img/SVG/maternity6.svg",
      "imageAltText": "Jane and her colleague from work are depicted talking. Jane's colleague is holding her baby while Jane looks on proudly.",
      "textSections": [
        {
          "type": 0,
          "title": "",
          "text": "Jane receives a notification via her preferred channel advising that her claim has now been closed. Jane returns to full-time work with her employer."
        },
        {
          "type": 1,
          "title": "Joined Up and Trusted Data",
          "text": "Because the DWP re-uses data where possible, we keep only the relevant and necessary information that will make it easier for Jane and her child to claim in the future."
        },
        {
          "type": 1,
          "title": "Accurate Signposting",
          "text": "Because Jane’s experience was straight forward, streamlined and easy to manage, Jane is more likely to recommend and signpost other citizens similarly to how she was signposted."
        }
      ]
    }

  ]
}`


var work = `{
  "pageTitle": "Working Age and Health",
  "description": "Description",
  "sections": [
    {
      "id": "1",
      "artwork": "img/SVG/work1.svg",
      "imageAltText": "Two people eating burgers together. One of them is in a wheelchair and using a smartphone to view a social media advertisement for the DWP.",
      "textSections": [
        {
          "type": 0,
          "title": "",
          "text": "Gary has spent most of his career working in construction, however after a life-changing injury, Gary can no longer continue to work in this industry. Gary is now unemployed and has been struggling to make ends meet with the limited savings he has left."
        },
        {
          "type": 0,
          "title": "",
          "text": "While spending time with a friend, Gary sees a DWP social media account, which says that we can help people like him get into work. Gary jumps at the opportunity and follows the link provided, which takes him a page where he can find out more about the different types of support the DWP offer."
        },
        {
          "type": 1,
          "title": "Effective Signposting",
          "text": "Effective marketing campaigns can engage citizens we may not normally reach, and connect them directly to our digital gateways and journeys, so that they're correctly oriented and informed from the start."
        }
      ]
    },
    {
      "id": "2",
      "artwork": "img/SVG/work2.svg",
      "imageAltText": "Gary using his smartphone to access GOV.UK to see information about eligibility.",
      "textSections": [
        {
          "type": 0,
          "title": "",
          "text": "Gary learns that he is eligible for Employment & Support Allowance. Gary clicks the link on the page and starts his application online."
        },
        {
          "type": 1,
          "title": "Effective Signposting",
          "text": "Gary can submit his claim any time of the day, on the channel that best suits his needs. Gary is provided clear, digestible information about each step of the process, which makes it easier for him to complete his application."
        }
      ]
    },
    {
      "id": "3",
      "artwork": "img/SVG/work3.svg",
      "imageAltText": "A series of hexagons with symbols on them that visualise how the DWP process data.",
      "textSections": [
        {
          "type": 0,
          "title": "",
          "text": "The DWP begin to process Gary’s claim to Employment & Support Allowance."
        },
        {
          "type": 1,
          "title": "Identifying Citizens Effectively",
          "text": "We're assembling a pantry of data sources and services that will help us identify, verify and authenticate citizens online and over the phone."
        },
        {
          "type": 1,
          "title": "Joined Up and Trusted Data",
          "text": "New Style ESA and JSA are similar benefits, however frequently their processes and features are different. We’ll improve the consistency of the experience for both benefits by sharing more features between them."
        },
        {
          "type": 1,
          "title": "Joined Up and Trusted Data",
          "text": "Instead of requesting heaps of evidence from the citizen, we can reach out to our external partners like HMRC, the NHS and more to fill the gaps in our knowledge. We'll deliver streamlined decisions, based on high-quality data."
        },
        {
          "type": 1,
          "title": "Smarter Payments",
          "text": "Our payments will be more transparent and visible to citizens, while also being continuously scrutinised for fraud, thanks to the insights from our intelligent trust and risk technology."
        },
        {
          "type": 0,
          "title": "",
          "text": "The DWP confirm Gary’s claim and start making regular payments to them."
        }
      ]
    },
    {
      "id": "4",
      "artwork": "img/SVG/work4.svg",
      "imageAltText": "Gary is pictured talking to a DWP colleague over the phone.",
      "textSections": [
        {
          "type": 0,
          "title": "",
          "text": "After some time adjusting and training to build his digital skills, Gary starts looking for a new role that would be suitable for him and inclusive to his disability. After a thorough job search, Gary successfuly secures a part-time role working 15 hours a week in an office."
        },
        {
          "type": 0,
          "title": "",
          "text": "Gary gets in touch with the DWP to tell us he's secured a role, as well as to find out if there is any additional support available to help him pay for some neccessary adaptations that will help him in the workplace."
        },
        {
          "type": 0,
          "title": "",
          "text": "The DWP agent makes Gary aware that the Department can offer financial support to help remove the barriers that disabled people face when accessing work. Gary is signposted to our digital gateway to read more, and decides to apply online."
        },
        {
          "type": 1,
          "title": "Effective Signposting",
          "text": "Effective signposting isn’t just about new claims. Its also about connecting citizens to schemes, services and resources, and making sure that we give citizens clear routes to the support we offer across the Department."
        },
        {
          "type": 1,
          "title": "Identifying Citizens Effectively",
          "text": "As the Department has already established Gary's identity through his ESA claim, this makes it easier for Gary to claim other types of support from us. We can use the data we already have to make Gary's claim journey more straight-forward."
        }
      ]
    },
    {
      "id": "5",
      "artwork": "img/SVG/work5.svg",
      "imageAltText": "Gary is wearing a suit, and is shaking hands with a businesswoman on his first day at a new job.",
      "textSections": [
        {
          "type": 0,
          "title": "",
          "text": "Gary can notify the DWP through multiple channels about a change of circumstances. When Gary's earnings and hours fluctuate, it's easy for him to get in contact with the Department."
        },
        {
          "type": 1,
          "title": "Self-Service",
          "text": "Gary can notify the DWP through multiple channels about a change of circumstances. When Gary's earnings and hours fluctuate, it's easy for him to get in contact with the Department."
        },
        {
          "type": 1,
          "title": "Effective Signposting",
          "text": "Because we know Gary, his circumstances and his preferences, We can use this information to tailor what support we offer him, and how we engage in a way that best suits his needs."
        }
      ]
    }
  ]
}`




function downloadBlob(e) {
  var pageTitle = data.pageTitle;
  var pageTop = `
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="description" content="data.description">
<link rel="icon" type="image/x-icon" href="favicon.ico" sizes="any"> 
<link rel="icon" href="favicon.svg" type="image/svg+xml">
<link rel="apple-touch-icon" href="/apple-touch-icon.png"/>
<link rel="manifest" href="/manifest.json" />

<title>${pageTitle} - Modernising Our Services</title>
	
<link rel="stylesheet" href="animations.css">
<link rel="stylesheet" href="global.css">
</head>

<body>
	
<header>
<a href="#"></a>
	<div class="bar nav-bar">
		<div class="bar-wrapper">
			<div class="bar-child">
			<img class="logo" src="dwp-digital-logo.svg" alt="DWP Digital">
			<img class="logo" src="img/button-future.svg" alt="Our Digital Future">
			</div>
			<div class="bar-child page-titles">
				<h1 id="regionheading">${pageTitle}</h1>
				<h5>Modernising Our Services</h5>
			</div>
			<nav class="bar-child">
				<button class="nav-button" onclick="history.back()">
					<img src="img/button-back.svg" alt="">
					BACK
				</button>
				<form>
				<button class="nav-button" formaction="./index.html">
					<img src="img/button-home.svg" alt="">
					HOME
				</button>
				</form>
			</nav>
		</div>
	</div>
</header>
<div class="body-flex-wrapper fade-in">`
var textString = ""

for (const section of data.sections) {
	var firstSection = ""
	if (section.id === 1)  {
		firstSection = "first-story "
	}
	textString = textString + `<div class="story-sub-section">
		<div class=" ${firstSection}image-column">
			<div><img src="${section.artwork}" alt="${section.imageAltText}"></div>
		</div>
		<div class="${firstSection}text-column">`
    for (const textSection of section.textSections) {
		if (textSection.type === 0) {
			textString = textString + `<p>${textSection.text}</p>`
			console.log(textString)
		}
		if (textSection.type === 1) {
			
			var bulletNames = ['Accelerated Decision Making', 'Effective Signposting', 'Identifying Citizens Effectively', 'Smarter Payments', 'Understanding Customers', 'Life Events Fed Into Process', 'Self-Service', 'Joined Up and Trusted Data']
			var bulletImages = ['./img/service-decision.svg', './img/service-signpost.svg', './img/service-identity.svg', './img/service-payment.svg','./img/service-customers.svg', './img/service-fed.svg', './img/service-self.svg', './img/service-data.svg']
		const posit = bulletNames.indexOf(textSection.title)
		const spacesReplaced = './service/' + textSection.title.replace(/ /g, '-') + '.html';
		const urlString = spacesReplaced.toLowerCase()
		const artString = bulletImages[bulletNames.indexOf(textSection.title)]
		textString = textString + `
		<div class="bullet-point">
			<img src="${artString}" role="img">
			<div class="bullet-point-text">
			  <button onClick="parent.location='${urlString}'" class="bullet-button">${textSection.title}</button>
			  <p>${textSection.text}</p>
			  </div>
		</div>`
		}
		if (textSection.type === 2) {
			textString =  textString + `<h3>${textSection.text}</h3>`
		}
	}
	textString = textString + `</div></div><hr>`
}
const pageBottom = `</main>
	<footer class="bar">
		<div class="bar-wrapper">
			<p class="bar-child">DWP Digital</p>
			<div>
				<button class="bar-child bullet-button" onClick="parent.location='#'">
					Back to Top
				</button>
			</div>
			<p class="bar-child">Crown Copyright 2022</p>
		</div>
	</footer>
</body>
</html>`
  var htmlString = pageTop + textString + pageBottom
  var blob = new Blob([htmlString], {type : 'text/html'});
  var url = URL.createObjectURL(blob);
  e.href = url;
  var pageUrl = data.pageTitle.toLowerCase() + '.html'
  e.download = pageUrl
}
var data = JSON.parse(maternity);
var e = document.getElementById('maternity');
downloadBlob(e)

var data = JSON.parse(work);
var e = document.getElementById('work');
downloadBlob(e)
